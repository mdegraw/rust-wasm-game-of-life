import{S as X,i as Y,s as V,e as b,a as R,b as k,c as w,l as j,u as pe,g as de,d as _e,t as P,f as D,h as v,j as ge,k as he,m as ye,n as be,o as we,p as ve,q as $e,r as S,v as ke,w as U,x as $,y as G,z as ne,A as Ce,B as W,C as Le,D as Ae}from"./vendor.951d9cbf.js";const Re=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};Re();let h,le=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});le.decode();let Q=null;function Pe(){return(Q===null||Q.buffer!==h.memory.buffer)&&(Q=new Uint8Array(h.memory.buffer)),Q}function oe(t,e){return le.decode(Pe().subarray(t,t+e))}function Me(t){return t==null}let ee=null;function ae(){return(ee===null||ee.buffer!==h.memory.buffer)&&(ee=new Int32Array(h.memory.buffer)),ee}function Fe(t){return()=>{throw new Error(`${t} is not defined`)}}const Oe=Object.freeze({Dead:0,"0":"Dead",Alive:1,"1":"Alive"});class B{static __wrap(e){const n=Object.create(B.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();h.__wbg_universe_free(e)}static new(e){var n=h.universe_new(Me(e)?16777215:e?1:0);return B.__wrap(n)}static square_one(){var e=h.universe_square_one();return B.__wrap(e)}width(){var e=h.universe_width(this.ptr);return e>>>0}height(){var e=h.universe_height(this.ptr);return e>>>0}cells(){var e=h.universe_cells(this.ptr);return e}tick(){h.universe_tick(this.ptr)}render(){try{const s=h.__wbindgen_add_to_stack_pointer(-16);h.universe_render(s,this.ptr);var e=ae()[s/4+0],n=ae()[s/4+1];return oe(e,n)}finally{h.__wbindgen_add_to_stack_pointer(16),h.__wbindgen_free(e,n)}}toggle_cell(e,n){h.universe_toggle_cell(this.ptr,e,n)}}async function De(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(s){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}async function re(t){typeof t=="undefined"&&(t=new URL("/rust-wasm-game-of-life/assets/rust_wasm_game_of_life_bg.9e487d61.wasm",self.location));const e={};e.wbg={},e.wbg.__wbg_random_a582babfa4489c72=typeof Math.random=="function"?Math.random:Fe("Math.random"),e.wbg.__wbindgen_throw=function(l,o){throw new Error(oe(l,o))},(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:s}=await De(await t,e);return h=n.exports,re.__wbindgen_wasm_module=s,h}var M;(function(t){t.Rules="rules",t.Patterns="patterns",t.Usage="usage"})(M||(M={}));const Ie=t=>({}),ie=t=>({});function ce(t){let e,n,s,l,o,a;const m=t[5].body,c=ve(m,t,t[4],ie);return{c(){e=b("div"),n=R(),s=b("div"),c&&c.c(),k(e,"class","modal-background svelte-36y6ba"),k(s,"class","modal svelte-36y6ba"),k(s,"role","dialog"),k(s,"aria-modal","true")},m(u,d){w(u,e,d),w(u,n,d),w(u,s,d),c&&c.m(s,null),t[6](s),l=!0,o||(a=j(e,"click",t[2]),o=!0)},p(u,d){c&&c.p&&(!l||d&16)&&pe(c,m,u,u[4],l?_e(m,u[4],d,Ie):de(u[4]),ie)},i(u){l||(P(c,u),l=!0)},o(u){D(c,u),l=!1},d(u){u&&v(e),u&&v(n),u&&v(s),c&&c.d(u),t[6](null),o=!1,a()}}}function Se(t){let e,n,s,l,o=t[0]&&ce(t);return{c(){o&&o.c(),e=ge()},m(a,m){o&&o.m(a,m),w(a,e,m),n=!0,s||(l=j(window,"keydown",t[3]),s=!0)},p(a,[m]){a[0]?o?(o.p(a,m),m&1&&P(o,1)):(o=ce(a),o.c(),P(o,1),o.m(e.parentNode,e)):o&&(he(),D(o,1,1,()=>{o=null}),ye())},i(a){n||(P(o),n=!0)},o(a){D(o),n=!1},d(a){o&&o.d(a),a&&v(e),s=!1,l()}}}function Ee(t,e,n){let{$$slots:s={},$$scope:l}=e;const o=be(),a=()=>o("close");let{open:m=!1}=e,c;const u=p=>{if(p.key==="Escape"){a();return}if(p.key==="Tab"){const z=c.querySelectorAll("*"),C=Array.from(z).filter(I=>I.tabIndex>=0);let i=C.indexOf(document.activeElement);i===-1&&p.shiftKey&&(i=0),i+=C.length+(p.shiftKey?-1:1),i%=C.length,C[i].focus(),p.preventDefault()}},d=typeof document!="undefined"&&document.activeElement;d&&we(()=>{d.focus()});function x(p){$e[p?"unshift":"push"](()=>{c=p,n(1,c)})}return t.$$set=p=>{"open"in p&&n(0,m=p.open),"$$scope"in p&&n(4,l=p.$$scope)},[m,c,a,u,l,s,x]}class se extends X{constructor(e){super();Y(this,e,Ee,Se,V,{open:0})}}function Te(t){let e;return{c(){e=b("div"),e.innerHTML=`<header class="pattern-title svelte-aix7ha"><h3>Interesting Patterns (<a href="http://pi.math.cornell.edu/~lipa/mec/lesson6.html" target="_blank" class="svelte-aix7ha">source</a>)</h3></header> 
  <h3>Still Patterns:</h3> 
  <ul class="pattern-list svelte-aix7ha"><li class="svelte-aix7ha">Square: <img src="images/sq.png" alt="square pattern"/></li> 
    <li class="svelte-aix7ha">Boat: <img src="images/boat.png" alt="boat pattern"/></li> 
    <li class="svelte-aix7ha">Loaf: <img src="images/loaf.png" alt="loaf pattern"/></li> 
    <li class="svelte-aix7ha">Ship: <img src="images/ship.png" alt="ship pattern"/></li></ul> 
  <h3>Dynamic Patterns:</h3> 
  <ul class="pattern-list svelte-aix7ha"><li class="svelte-aix7ha">Trimino: <img src="images/trimino.png" alt="trimino pattern"/>,</li> 
    <li class="svelte-aix7ha">Glider: <img src="images/glider.png" alt="glider pattern"/></li> 
    <li class="svelte-aix7ha">Lightweight Space Ship: <img src="images/lwss.png" alt="lightweight space ship pattern"/></li> 
    <li class="svelte-aix7ha">F-pentomino: <img src="images/f.png" alt="f-pentomino pattern"/></li> 
    <li class="svelte-aix7ha">Acorn: <img src="images/acorn.png" alt="acorn pattern"/></li></ul>`},m(n,s){w(n,e,s)},p:S,i:S,o:S,d(n){n&&v(e)}}}class je extends X{constructor(e){super();Y(this,e,null,Te,V,{})}}function qe(t){let e;return{c(){e=b("div"),e.innerHTML=`<h3>Conway&#39;s Game of Life (<a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life" target="_blank" class="svelte-1i0dxm8">wikipedia</a>) Rules:</h3> 
  <ul class="rule-list svelte-1i0dxm8"><li>Any live cell with fewer than two live neighbours dies, as if by underpopulation.</li> 
    <li>Any live cell with two or three live neighbours lives on to the next generation.</li> 
    <li>Any live cell with more than three live neighbours dies, as if by overpopulation.</li> 
    <li>Any dead cell with exactly three live neighbours becomes a live cell, as if by
      reproduction.</li></ul>`},m(n,s){w(n,e,s)},p:S,i:S,o:S,d(n){n&&v(e)}}}class Ue extends X{constructor(e){super();Y(this,e,null,qe,V,{})}}function Ge(t){let e;return{c(){e=b("div"),e.innerHTML=`<h3>Usage</h3> 
  <ul class="usage-list svelte-480ker"><li>Click Pause and select cells on the canvas grid to create your own patterns.</li> 
    <li>Click Play to see them evolve.</li> 
    <li>Click Randomize to see a randomly generated universe.</li> 
    <li>Click Heat Death to set all the cells to dead for a blank canvas.</li></ul>`},m(n,s){w(n,e,s)},p:S,i:S,o:S,d(n){n&&v(e)}}}class We extends X{constructor(e){super();Y(this,e,null,Ge,V,{})}}function Be(t){let e,n;return e=new Ue({}),{c(){U(e.$$.fragment)},m(s,l){G(e,s,l),n=!0},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){W(e,s)}}}function xe(t){let e,n;return e=new We({}),{c(){U(e.$$.fragment)},m(s,l){G(e,s,l),n=!0},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){W(e,s)}}}function ze(t){let e,n;return e=new je({}),{c(){U(e.$$.fragment)},m(s,l){G(e,s,l),n=!0},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){W(e,s)}}}function He(t){let e,n,s=(t[0]?"Pause":"Play")+"",l,o,a,m,c,u,d,x,p,z,C,i,I,Z,F,L,y,A,_,O,E,J;return F=new se({props:{open:t[1].show&&t[1].type===M.Rules,$$slots:{body:[Be]},$$scope:{ctx:t}}}),F.$on("close",t[6]),y=new se({props:{open:t[1].show&&t[1].type===M.Usage,$$slots:{body:[xe]},$$scope:{ctx:t}}}),y.$on("close",t[6]),_=new se({props:{open:t[1].show&&t[1].type===M.Patterns,$$slots:{body:[ze]},$$scope:{ctx:t}}}),_.$on("close",t[6]),{c(){e=b("div"),n=b("button"),l=ke(s),o=R(),a=b("button"),a.textContent="Randomize",m=R(),c=b("button"),c.textContent="Heat Death",u=R(),d=b("button"),d.textContent="Rules",x=R(),p=b("button"),p.textContent="Usage",z=R(),C=b("button"),C.textContent="Patterns",i=R(),I=b("canvas"),Z=R(),U(F.$$.fragment),L=R(),U(y.$$.fragment),A=R(),U(_.$$.fragment),k(n,"class","gol-btn gol-pause-play svelte-1j1u06u"),k(a,"class","gol-btn svelte-1j1u06u"),k(c,"class","gol-btn svelte-1j1u06u"),k(d,"class","gol-btn svelte-1j1u06u"),k(p,"class","gol-btn svelte-1j1u06u"),k(C,"class","gol-btn svelte-1j1u06u"),k(e,"class","gol-btn-row svelte-1j1u06u"),k(I,"class","game-of-life-canvas"),k(I,"id","game-of-life-canvas")},m(r,f){w(r,e,f),$(e,n),$(n,l),$(e,o),$(e,a),$(e,m),$(e,c),$(e,u),$(e,d),$(e,x),$(e,p),$(e,z),$(e,C),w(r,i,f),w(r,I,f),w(r,Z,f),G(F,r,f),w(r,L,f),G(y,r,f),w(r,A,f),G(_,r,f),O=!0,E||(J=[j(n,"click",function(){ne(t[2])&&t[2].apply(this,arguments)}),j(a,"click",function(){ne(t[4])&&t[4].apply(this,arguments)}),j(c,"click",function(){ne(t[3])&&t[3].apply(this,arguments)}),j(d,"click",t[8]),j(p,"click",t[9]),j(C,"click",t[10])],E=!0)},p(r,[f]){t=r,(!O||f&1)&&s!==(s=(t[0]?"Pause":"Play")+"")&&Ce(l,s);const H={};f&2&&(H.open=t[1].show&&t[1].type===M.Rules),f&4096&&(H.$$scope={dirty:f,ctx:t}),F.$set(H);const q={};f&2&&(q.open=t[1].show&&t[1].type===M.Usage),f&4096&&(q.$$scope={dirty:f,ctx:t}),y.$set(q);const g={};f&2&&(g.open=t[1].show&&t[1].type===M.Patterns),f&4096&&(g.$$scope={dirty:f,ctx:t}),_.$set(g)},i(r){O||(P(F.$$.fragment,r),P(y.$$.fragment,r),P(_.$$.fragment,r),O=!0)},o(r){D(F.$$.fragment,r),D(y.$$.fragment,r),D(_.$$.fragment,r),O=!1},d(r){r&&v(e),r&&v(i),r&&v(I),r&&v(Z),W(F,r),r&&v(L),W(y,r),r&&v(A),W(_,r),E=!1,Le(J)}}}let Ne=!0;function Ke(t,e,n){let{memory:s}=e,l,o=!0,a={show:!1},m,c,u;const d=({type:i})=>{n(1,a={type:i,show:!0})},x=()=>{n(1,a={show:!1})};Ae(()=>{const i=5,I="#CCCCCC",Z="#FFFFFF",F="#000000";l=B.new(Ne);const L=l.width(),y=l.height(),A=document.getElementById("game-of-life-canvas");A.height=(i+1)*y+1,A.width=(i+1)*L+1;const _=A.getContext("2d");let O=null;const E=()=>{_.beginPath(),_.strokeStyle=I;for(let g=0;g<=L;g++)_.moveTo(g*(i+1)+1,0),_.lineTo(g*(i+1)+1,(i+1)*y+1);for(let g=0;g<=y;g++)_.moveTo(0,g*(i+1)+1),_.lineTo((i+1)*L+1,g*(i+1)+1);_.stroke()},J=(g,T)=>g*L+T,r=()=>{const g=l.cells(),T=new Uint8Array(s.buffer,g,L*y);_.beginPath();for(let N=0;N<y;N++)for(let K=0;K<L;K++){const te=J(N,K);_.fillStyle=T[te]===Oe.Dead?Z:F,_.fillRect(K*(i+1)+1,N*(i+1)+1,i,i)}_.stroke()},f=()=>{o&&(l.tick(),E(),r(),O=requestAnimationFrame(f))},H=()=>{f()},q=()=>{n(0,o=!1),typeof O=="number"&&cancelAnimationFrame(O),O=null};A.addEventListener("click",g=>{const T=A.getBoundingClientRect(),N=A.width/T.width,K=A.height/T.height,te=(g.clientX-T.left)*N,ue=(g.clientY-T.top)*K,fe=Math.min(Math.floor(ue/(i+1)),y-1),me=Math.min(Math.floor(te/(i+1)),L-1);l.toggle_cell(fe,me),E(),r()}),n(2,m=()=>{n(0,o=!o),o?H():q()}),n(3,c=()=>{l=B.square_one(),E(),r(),q()}),n(4,u=()=>{l=B.new(!0),E(),r(),o||q()}),H()});const p=()=>d({show:!0,type:M.Rules}),z=()=>d({show:!0,type:M.Usage}),C=()=>d({show:!0,type:M.Patterns});return t.$$set=i=>{"memory"in i&&n(7,s=i.memory)},[o,a,m,c,u,d,x,s,p,z,C]}class Xe extends X{constructor(e){super();Y(this,e,Ke,He,V,{memory:7})}}function Ye(t){let e,n,s,l,o;return l=new Xe({props:{memory:t[0]}}),{c(){e=b("main"),n=b("h1"),n.textContent="Conway's Game of Life",s=R(),U(l.$$.fragment)},m(a,m){w(a,e,m),$(e,n),$(e,s),G(l,e,null),o=!0},p(a,[m]){const c={};m&1&&(c.memory=a[0]),l.$set(c)},i(a){o||(P(l.$$.fragment,a),o=!0)},o(a){D(l.$$.fragment,a),o=!1},d(a){a&&v(e),W(l)}}}function Ve(t,e,n){let{memory:s}=e;return t.$$set=l=>{"memory"in l&&n(0,s=l.memory)},[s]}class Ze extends X{constructor(e){super();Y(this,e,Ve,Ye,V,{memory:0})}}const Je=async()=>{const t=performance.now(),{memory:e}=await re(),n=performance.now();console.log(`Call to wasm init took ${n-t} milliseconds`),new Ze({target:document.body,props:{memory:e}})};Je();
