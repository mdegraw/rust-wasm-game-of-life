import{S as G,i as U,s as B,e as h,t as J,a as O,b as L,c as I,d as g,l as T,f as q,g as Q,n as N,h as P,r as ee,o as te,j as ne,m as oe,k as re,p as se,q as ae}from"./vendor.e50969e1.js";const ie=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};ie();let l,z=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});z.decode();let j=null;function le(){return(j===null||j.buffer!==l.memory.buffer)&&(j=new Uint8Array(l.memory.buffer)),j}function $(t,e){return z.decode(le().subarray(t,t+e))}function ce(t){return t==null}let D=null;function X(){return(D===null||D.buffer!==l.memory.buffer)&&(D=new Int32Array(l.memory.buffer)),D}function fe(t){return()=>{throw new Error(`${t} is not defined`)}}const ue=Object.freeze({Dead:0,"0":"Dead",Alive:1,"1":"Alive"});class b{static __wrap(e){const o=Object.create(b.prototype);return o.ptr=e,o}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();l.__wbg_universe_free(e)}static new(e){var o=l.universe_new(ce(e)?16777215:e?1:0);return b.__wrap(o)}static square_one(){var e=l.universe_square_one();return b.__wrap(e)}width(){var e=l.universe_width(this.ptr);return e>>>0}height(){var e=l.universe_height(this.ptr);return e>>>0}cells(){var e=l.universe_cells(this.ptr);return e}tick(){l.universe_tick(this.ptr)}render(){try{const s=l.__wbindgen_add_to_stack_pointer(-16);l.universe_render(s,this.ptr);var e=X()[s/4+0],o=X()[s/4+1];return $(e,o)}finally{l.__wbindgen_add_to_stack_pointer(16),l.__wbindgen_free(e,o)}}toggle_cell(e,o){l.universe_toggle_cell(this.ptr,e,o)}}async function me(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(s){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}const o=await t.arrayBuffer();return await WebAssembly.instantiate(o,e)}else{const o=await WebAssembly.instantiate(t,e);return o instanceof WebAssembly.Instance?{instance:o,module:t}:o}}async function Y(t){typeof t=="undefined"&&(t=new URL("/rust-wasm-game-of-life/assets/rust_wasm_game_of_life_bg.9e487d61.wasm",self.location));const e={};e.wbg={},e.wbg.__wbg_random_a582babfa4489c72=typeof Math.random=="function"?Math.random:fe("Math.random"),e.wbg.__wbindgen_throw=function(n,r){throw new Error($(n,r))},(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:o,module:s}=await me(await t,e);return l=o.exports,Y.__wbindgen_wasm_module=s,l}function de(t){let e,o,s=(t[0]?"Pause":"Play")+"",n,r,a,_,m,i,p,A,R;return{c(){e=h("div"),o=h("button"),n=J(s),r=O(),a=h("button"),a.textContent="Randomize",_=O(),m=h("button"),m.textContent="Heat Death",i=O(),p=h("canvas"),L(o,"class","gol-btn gol-pause-play svelte-1j1u06u"),L(a,"class","gol-btn svelte-1j1u06u"),L(m,"class","gol-btn svelte-1j1u06u"),L(e,"class","gol-btn-row svelte-1j1u06u"),L(p,"class","game-of-life-canvas"),L(p,"id","game-of-life-canvas")},m(c,u){I(c,e,u),g(e,o),g(o,n),g(e,r),g(e,a),g(e,_),g(e,m),I(c,i,u),I(c,p,u),A||(R=[T(o,"click",function(){q(t[1])&&t[1].apply(this,arguments)}),T(a,"click",function(){q(t[3])&&t[3].apply(this,arguments)}),T(m,"click",function(){q(t[2])&&t[2].apply(this,arguments)})],A=!0)},p(c,[u]){t=c,u&1&&s!==(s=(t[0]?"Pause":"Play")+"")&&Q(n,s)},i:N,o:N,d(c){c&&P(e),c&&P(i),c&&P(p),A=!1,ee(R)}}}let _e=!0;function ye(t,e,o){let{memory:s}=e,n,r=!0,a,_,m;return te(()=>{const i=5,p="#CCCCCC",A="#FFFFFF",R="#000000";n=b.new(_e);const c=n.width(),u=n.height(),w=document.getElementById("game-of-life-canvas");w.height=(i+1)*u+1,w.width=(i+1)*c+1;const d=w.getContext("2d");let F=null;const k=()=>{d.beginPath(),d.strokeStyle=p;for(let f=0;f<=c;f++)d.moveTo(f*(i+1)+1,0),d.lineTo(f*(i+1)+1,(i+1)*u+1);for(let f=0;f<=u;f++)d.moveTo(0,f*(i+1)+1),d.lineTo((i+1)*c+1,f*(i+1)+1);d.stroke()},H=(f,y)=>f*c+y,M=()=>{const f=n.cells(),y=new Uint8Array(s.buffer,f,c*u);d.beginPath();for(let v=0;v<u;v++)for(let C=0;C<c;C++){const S=H(v,C);d.fillStyle=y[S]===ue.Dead?A:R,d.fillRect(C*(i+1)+1,v*(i+1)+1,i,i)}d.stroke()},W=()=>{r&&(n.tick(),k(),M(),F=requestAnimationFrame(W))},x=()=>{W()},E=()=>{o(0,r=!1),typeof F=="number"&&cancelAnimationFrame(F),F=null};w.addEventListener("click",f=>{const y=w.getBoundingClientRect(),v=w.width/y.width,C=w.height/y.height,S=(f.clientX-y.left)*v,K=(f.clientY-y.top)*C,V=Math.min(Math.floor(K/(i+1)),u-1),Z=Math.min(Math.floor(S/(i+1)),c-1);n.toggle_cell(V,Z),k(),M()}),o(1,a=()=>{o(0,r=!r),r?x():E()}),o(2,_=()=>{n=b.square_one(),k(),M(),E()}),o(3,m=()=>{n=b.new(!0),k(),M(),r||E()}),x()}),t.$$set=i=>{"memory"in i&&o(4,s=i.memory)},[r,a,_,m,s]}class ge extends G{constructor(e){super();U(this,e,ye,de,B,{memory:4})}}function pe(t){let e,o,s,n,r;return n=new ge({props:{memory:t[0]}}),{c(){e=h("main"),o=h("h1"),o.textContent="Conway's Game of Life",s=O(),ne(n.$$.fragment)},m(a,_){I(a,e,_),g(e,o),g(e,s),oe(n,e,null),r=!0},p(a,[_]){const m={};_&1&&(m.memory=a[0]),n.$set(m)},i(a){r||(re(n.$$.fragment,a),r=!0)},o(a){se(n.$$.fragment,a),r=!1},d(a){a&&P(e),ae(n)}}}function we(t,e,o){let{memory:s}=e;return t.$$set=n=>{"memory"in n&&o(0,s=n.memory)},[s]}class he extends G{constructor(e){super();U(this,e,we,pe,B,{memory:0})}}const be=async()=>{const t=performance.now(),{memory:e}=await Y(),o=performance.now();console.log(`Call to wasm init took ${o-t} milliseconds`),new he({target:document.body,props:{memory:e}})};be();
