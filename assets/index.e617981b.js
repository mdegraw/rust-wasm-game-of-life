import{S as K,i as X,s as Y,e as y,a as M,b as k,c as w,l as q,u as _e,g as he,d as ye,t as P,f as I,h as v,j as be,k as we,m as ve,n as $e,o as ke,p as Ce,q as Ae,r as E,v as Le,w as B,x as $,y as G,z as oe,A as Re,B as W,C as Me,D as Pe}from"./vendor.951d9cbf.js";const Fe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}};Fe();let p,ae=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});ae.decode();let ee=null;function Oe(){return(ee===null||ee.buffer!==p.memory.buffer)&&(ee=new Uint8Array(p.memory.buffer)),ee}function re(t,e){return ae.decode(Oe().subarray(t,t+e))}function Ie(t){return t==null}let te=null;function ce(){return(te===null||te.buffer!==p.memory.buffer)&&(te=new Int32Array(p.memory.buffer)),te}function Se(t){return()=>{throw new Error(`${t} is not defined`)}}const De=Object.freeze({Dead:0,"0":"Dead",Alive:1,"1":"Alive"});class z{static __wrap(e){const n=Object.create(z.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();p.__wbg_universe_free(e)}static new(e,n,s){var o=p.universe_new(e,n,Ie(s)?16777215:s?1:0);return z.__wrap(o)}static square_one(e,n){var s=p.universe_square_one(e,n);return z.__wrap(s)}width(){var e=p.universe_width(this.ptr);return e>>>0}height(){var e=p.universe_height(this.ptr);return e>>>0}cells(){var e=p.universe_cells(this.ptr);return e}tick(){p.universe_tick(this.ptr)}render(){try{const s=p.__wbindgen_add_to_stack_pointer(-16);p.universe_render(s,this.ptr);var e=ce()[s/4+0],n=ce()[s/4+1];return re(e,n)}finally{p.__wbindgen_add_to_stack_pointer(16),p.__wbindgen_free(e,n)}}toggle_cell(e,n){p.universe_toggle_cell(this.ptr,e,n)}set_width(e){p.universe_set_width(this.ptr,e)}set_height(e){p.universe_set_height(this.ptr,e)}}async function Ee(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(s){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}async function ue(t){typeof t=="undefined"&&(t=new URL("/rust-wasm-game-of-life/assets/rust_wasm_game_of_life_bg.1846600f.wasm",self.location));const e={};e.wbg={},e.wbg.__wbg_random_a582babfa4489c72=typeof Math.random=="function"?Math.random:Se("Math.random"),e.wbg.__wbindgen_throw=function(o,l){throw new Error(re(o,l))},(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:s}=await Ee(await t,e);return p=n.exports,ue.__wbindgen_wasm_module=s,p}var F;(function(t){t.Rules="rules",t.Patterns="patterns",t.Usage="usage"})(F||(F={}));const Te=t=>({}),fe=t=>({});function me(t){let e,n,s,o,l,i;const d=t[5].body,r=Ce(d,t,t[4],fe);return{c(){e=y("div"),n=M(),s=y("div"),r&&r.c(),k(e,"class","modal-background svelte-36y6ba"),k(s,"class","modal svelte-36y6ba"),k(s,"role","dialog"),k(s,"aria-modal","true")},m(f,g){w(f,e,g),w(f,n,g),w(f,s,g),r&&r.m(s,null),t[6](s),o=!0,l||(i=q(e,"click",t[2]),l=!0)},p(f,g){r&&r.p&&(!o||g&16)&&_e(r,d,f,f[4],o?ye(d,f[4],g,Te):he(f[4]),fe)},i(f){o||(P(r,f),o=!0)},o(f){I(r,f),o=!1},d(f){f&&v(e),f&&v(n),f&&v(s),r&&r.d(f),t[6](null),l=!1,i()}}}function je(t){let e,n,s,o,l=t[0]&&me(t);return{c(){l&&l.c(),e=be()},m(i,d){l&&l.m(i,d),w(i,e,d),n=!0,s||(o=q(window,"keydown",t[3]),s=!0)},p(i,[d]){i[0]?l?(l.p(i,d),d&1&&P(l,1)):(l=me(i),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(we(),I(l,1,1,()=>{l=null}),ve())},i(i){n||(P(l),n=!0)},o(i){I(l),n=!1},d(i){l&&l.d(i),i&&v(e),s=!1,o()}}}function qe(t,e,n){let{$$slots:s={},$$scope:o}=e;const l=$e(),i=()=>l("close");let{open:d=!1}=e,r;const f=u=>{if(u.key==="Escape"){i();return}if(u.key==="Tab"){const S=r.querySelectorAll("*"),C=Array.from(S).filter(D=>D.tabIndex>=0);let L=C.indexOf(document.activeElement);L===-1&&u.shiftKey&&(L=0),L+=C.length+(u.shiftKey?-1:1),L%=C.length,C[L].focus(),u.preventDefault()}},g=typeof document!="undefined"&&document.activeElement;g&&ke(()=>{g.focus()});function U(u){Ae[u?"unshift":"push"](()=>{r=u,n(1,r)})}return t.$$set=u=>{"open"in u&&n(0,d=u.open),"$$scope"in u&&n(4,o=u.$$scope)},[d,r,i,f,o,s,U]}class le extends K{constructor(e){super();X(this,e,qe,je,Y,{open:0})}}function Ue(t){let e;return{c(){e=y("div"),e.innerHTML=`<header class="pattern-title svelte-aix7ha"><h3>Interesting Patterns (<a href="http://pi.math.cornell.edu/~lipa/mec/lesson6.html" target="_blank" class="svelte-aix7ha">source</a>)</h3></header> 
  <h3>Still Patterns:</h3> 
  <ul class="pattern-list svelte-aix7ha"><li class="svelte-aix7ha">Square: <img src="images/sq.png" alt="square pattern"/></li> 
    <li class="svelte-aix7ha">Boat: <img src="images/boat.png" alt="boat pattern"/></li> 
    <li class="svelte-aix7ha">Loaf: <img src="images/loaf.png" alt="loaf pattern"/></li> 
    <li class="svelte-aix7ha">Ship: <img src="images/ship.png" alt="ship pattern"/></li></ul> 
  <h3>Dynamic Patterns:</h3> 
  <ul class="pattern-list svelte-aix7ha"><li class="svelte-aix7ha">Trimino: <img src="images/trimino.png" alt="trimino pattern"/>,</li> 
    <li class="svelte-aix7ha">Glider: <img src="images/glider.png" alt="glider pattern"/></li> 
    <li class="svelte-aix7ha">Lightweight Space Ship: <img src="images/lwss.png" alt="lightweight space ship pattern"/></li> 
    <li class="svelte-aix7ha">F-pentomino: <img src="images/f.png" alt="f-pentomino pattern"/></li> 
    <li class="svelte-aix7ha">Acorn: <img src="images/acorn.png" alt="acorn pattern"/></li></ul>`},m(n,s){w(n,e,s)},p:E,i:E,o:E,d(n){n&&v(e)}}}class Be extends K{constructor(e){super();X(this,e,null,Ue,Y,{})}}function Ge(t){let e;return{c(){e=y("div"),e.innerHTML=`<h3>Conway&#39;s Game of Life (<a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life" target="_blank" class="svelte-1i0dxm8">wikipedia</a>) Rules:</h3> 
  <ul class="rule-list svelte-1i0dxm8"><li>Any live cell with fewer than two live neighbours dies, as if by underpopulation.</li> 
    <li>Any live cell with two or three live neighbours lives on to the next generation.</li> 
    <li>Any live cell with more than three live neighbours dies, as if by overpopulation.</li> 
    <li>Any dead cell with exactly three live neighbours becomes a live cell, as if by
      reproduction.</li></ul>`},m(n,s){w(n,e,s)},p:E,i:E,o:E,d(n){n&&v(e)}}}class We extends K{constructor(e){super();X(this,e,null,Ge,Y,{})}}function ze(t){let e;return{c(){e=y("div"),e.innerHTML=`<h3>Usage</h3> 
  <ul class="usage-list svelte-480ker"><li>Click Pause and select cells on the canvas grid to create your own patterns.</li> 
    <li>Click Play to see them evolve.</li> 
    <li>Click Randomize to see a randomly generated universe.</li> 
    <li>Click Heat Death to set all the cells to dead for a blank canvas.</li></ul>`},m(n,s){w(n,e,s)},p:E,i:E,o:E,d(n){n&&v(e)}}}class xe extends K{constructor(e){super();X(this,e,null,ze,Y,{})}}function He(t){let e,n;return e=new We({}),{c(){B(e.$$.fragment)},m(s,o){G(e,s,o),n=!0},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){W(e,s)}}}function Ne(t){let e,n;return e=new xe({}),{c(){B(e.$$.fragment)},m(s,o){G(e,s,o),n=!0},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){W(e,s)}}}function Ke(t){let e,n;return e=new Be({}),{c(){B(e.$$.fragment)},m(s,o){G(e,s,o),n=!0},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){W(e,s)}}}function Xe(t){let e,n,s=(t[0]?"Pause":"Play")+"",o,l,i,d,r,f,g,U,u,S,C,L,D,V,c,Z,O,J,_,A,R,b;return c=new le({props:{open:t[1].show&&t[1].type===F.Rules,$$slots:{body:[He]},$$scope:{ctx:t}}}),c.$on("close",t[6]),O=new le({props:{open:t[1].show&&t[1].type===F.Usage,$$slots:{body:[Ne]},$$scope:{ctx:t}}}),O.$on("close",t[6]),_=new le({props:{open:t[1].show&&t[1].type===F.Patterns,$$slots:{body:[Ke]},$$scope:{ctx:t}}}),_.$on("close",t[6]),{c(){e=y("div"),n=y("button"),o=Le(s),l=M(),i=y("button"),i.textContent="Randomize",d=M(),r=y("button"),r.textContent="Heat Death",f=M(),g=y("button"),g.textContent="Rules",U=M(),u=y("button"),u.textContent="Usage",S=M(),C=y("button"),C.textContent="Patterns",L=M(),D=y("canvas"),V=M(),B(c.$$.fragment),Z=M(),B(O.$$.fragment),J=M(),B(_.$$.fragment),k(n,"class","gol-btn gol-pause-play svelte-1j1u06u"),k(i,"class","gol-btn svelte-1j1u06u"),k(r,"class","gol-btn svelte-1j1u06u"),k(g,"class","gol-btn svelte-1j1u06u"),k(u,"class","gol-btn svelte-1j1u06u"),k(C,"class","gol-btn svelte-1j1u06u"),k(e,"class","gol-btn-row svelte-1j1u06u"),k(D,"class","game-of-life-canvas"),k(D,"id","game-of-life-canvas")},m(a,m){w(a,e,m),$(e,n),$(n,o),$(e,l),$(e,i),$(e,d),$(e,r),$(e,f),$(e,g),$(e,U),$(e,u),$(e,S),$(e,C),w(a,L,m),w(a,D,m),w(a,V,m),G(c,a,m),w(a,Z,m),G(O,a,m),w(a,J,m),G(_,a,m),A=!0,R||(b=[q(n,"click",function(){oe(t[2])&&t[2].apply(this,arguments)}),q(i,"click",function(){oe(t[4])&&t[4].apply(this,arguments)}),q(r,"click",function(){oe(t[3])&&t[3].apply(this,arguments)}),q(g,"click",t[8]),q(u,"click",t[9]),q(C,"click",t[10])],R=!0)},p(a,[m]){t=a,(!A||m&1)&&s!==(s=(t[0]?"Pause":"Play")+"")&&Re(o,s);const Q={};m&2&&(Q.open=t[1].show&&t[1].type===F.Rules),m&32768&&(Q.$$scope={dirty:m,ctx:t}),c.$set(Q);const T={};m&2&&(T.open=t[1].show&&t[1].type===F.Usage),m&32768&&(T.$$scope={dirty:m,ctx:t}),O.$set(T);const x={};m&2&&(x.open=t[1].show&&t[1].type===F.Patterns),m&32768&&(x.$$scope={dirty:m,ctx:t}),_.$set(x)},i(a){A||(P(c.$$.fragment,a),P(O.$$.fragment,a),P(_.$$.fragment,a),A=!0)},o(a){I(c.$$.fragment,a),I(O.$$.fragment,a),I(_.$$.fragment,a),A=!1},d(a){a&&v(e),a&&v(L),a&&v(D),a&&v(V),W(c,a),a&&v(Z),W(O,a),a&&v(J),W(_,a),R=!1,Me(b)}}}let Ye=!0;function Ve(t,e,n){let{memory:s}=e,o,l=!0,i={show:!1},d,r,f;const U=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?64:128,u={width:U,height:U},S=({type:c})=>{n(1,i={type:c,show:!0})},C=()=>{n(1,i={show:!1})};Pe(()=>{const c=5,Z="#CCCCCC",O="#FFFFFF",J="#000000";o=z.new(u.width,u.height,Ye);const _=o.width(),A=o.height(),R=document.getElementById("game-of-life-canvas");R.height=(c+1)*A+1,R.width=(c+1)*_+1;const b=R.getContext("2d");let a=null;const m=()=>{b.beginPath(),b.strokeStyle=Z;for(let h=0;h<=_;h++)b.moveTo(h*(c+1)+1,0),b.lineTo(h*(c+1)+1,(c+1)*A+1);for(let h=0;h<=A;h++)b.moveTo(0,h*(c+1)+1),b.lineTo((c+1)*_+1,h*(c+1)+1);b.stroke()},Q=(h,j)=>h*_+j,T=()=>{const h=o.cells(),j=new Uint8Array(s.buffer,h,_*A);b.beginPath();for(let H=0;H<A;H++)for(let N=0;N<_;N++){const se=Q(H,N);b.fillStyle=j[se]===De.Dead?O:J,b.fillRect(N*(c+1)+1,H*(c+1)+1,c,c)}b.stroke()},x=()=>{l&&(o.tick(),m(),T(),a=requestAnimationFrame(x))},ie=()=>{x()},ne=()=>{n(0,l=!1),typeof a=="number"&&cancelAnimationFrame(a),a=null};R.addEventListener("click",h=>{const j=R.getBoundingClientRect(),H=R.width/j.width,N=R.height/j.height,se=(h.clientX-j.left)*H,de=(h.clientY-j.top)*N,pe=Math.min(Math.floor(de/(c+1)),A-1),ge=Math.min(Math.floor(se/(c+1)),_-1);o.toggle_cell(pe,ge),m(),T()}),n(2,d=()=>{n(0,l=!l),l?ie():ne()}),n(3,r=()=>{o=z.square_one(u.width,u.height),m(),T(),ne()}),n(4,f=()=>{o=z.new(u.width,u.height,!0),m(),T(),l||ne()}),ie()});const L=()=>S({show:!0,type:F.Rules}),D=()=>S({show:!0,type:F.Usage}),V=()=>S({show:!0,type:F.Patterns});return t.$$set=c=>{"memory"in c&&n(7,s=c.memory)},[l,i,d,r,f,S,C,s,L,D,V]}class Ze extends K{constructor(e){super();X(this,e,Ve,Xe,Y,{memory:7})}}function Je(t){let e,n,s,o,l;return o=new Ze({props:{memory:t[0]}}),{c(){e=y("main"),n=y("h1"),n.textContent="Conway's Game of Life",s=M(),B(o.$$.fragment)},m(i,d){w(i,e,d),$(e,n),$(e,s),G(o,e,null),l=!0},p(i,[d]){const r={};d&1&&(r.memory=i[0]),o.$set(r)},i(i){l||(P(o.$$.fragment,i),l=!0)},o(i){I(o.$$.fragment,i),l=!1},d(i){i&&v(e),W(o)}}}function Qe(t,e,n){let{memory:s}=e;return t.$$set=o=>{"memory"in o&&n(0,s=o.memory)},[s]}class et extends K{constructor(e){super();X(this,e,Qe,Je,Y,{memory:0})}}const tt=async()=>{const t=performance.now(),{memory:e}=await ue(),n=performance.now();console.log(`Call to wasm init took ${n-t} milliseconds`),new et({target:document.body,props:{memory:e}})};tt();
